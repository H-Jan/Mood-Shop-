<!DOCTYPE HTML>
<html>

<head>
    <title>Mood-Shop-2</title>
    <link rel="stylesheet" href="resources/css/styles.css">
</head>

<body>

    <header class='page-header'>
        <h1>The Mood Shop</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Cart</a></li>
            </ul>
        </nav>
    </header>

    <main class='items' id='items'>
        <!--
          Display moods here
         -->
    </main>

    <footer>

    </footer>

    <script src="resources/js/data.js" type="module"></script>
    <script src="resources/js/script.js" type="module"></script>

    <script>
        const cart = []
        // -----------------------------------------
        // ADD ITEMS
        function addItems(name, price) {
            for (let i = 0; i < cart.length; i += 1) {
                if (cart[i].name === name) {
                    cart[i].qty += 1
                    // So this for loop needs to keep running, but needs to stop for below function
                    return
                    //return ends the for loop and function itself, stopping the below code for const.push(item)
                }
            }
            const item = { name, price, qty: 1 }
            cart.push(item)

        }
        // -------------------------------------------
        // SHOW ITEMS 
        function showItems() {

            const qty = gettingQty()
            console.log(`You have ${gettingQty()} items in your cart`)

            for (let i = 0; i < cart.length; i += 1) {
                console.log(`${cart[i].name} $${cart[i].price} x ${cart[i].qty}`)

            }

            console.log(`Total in cart: $${gettingTotal()}`)

        }

        function gettingQty() {
            //Did not know how to demonstrate quantity on own
            let qty = 0
            for (let i = 0; i < cart.length; i += 1) {
                qty += cart[i].qty
            }
            return qty
        }
        // scope is a term to define where a value is visible.
        // Quantity is only visible in the above function block
        // the return qty allows the function to run above by calling the function

        //----------------------------------
        // gettingTotal 
        function gettingTotal() {
            let totalPrice = 0
            for (let i = 0; i < cart.length; i += 1) {
                totalPrice += cart[i].price * cart[i].qty
                // As it is going down the cart.length, it will add the price times the quantity to the total price
                //until it reaches the bottom
            }

            return totalPrice.toFixed(3)
            // toFixed rounds off the number of decimal places 
            // toFixed returns a string, so should be last step as a 'display' for math

        }
        //-------------------------------------
        // REMOVE ITEM 
        function removeItems(name, qty = 0) {
            for (let i = 0; i < cart.length; i += 1) {
                if (cart[i].name === name) {
                    if (qty > 0) {
                        cart[i].qty -= qty
                    }
                    
                    if (cart[i].qty < 1 || qty === 0) {
                        cart.splice(i, 1)
                    }
                   
                    return
                }
            }


        }

        //---------------------------------
        addItems('Anger', 1.29)
        addItems('Orange', 1.29)
        addItems('Orange', 1.29)
        addItems('Opinion', 0.02)
        addItems('Freebees', 9.81)
        addItems('Orange', 1.29)

        showItems()

        removeItems('Freebees')
        removeItems('Orange', 2)

        showItems()

    </script>

</body>

</html>